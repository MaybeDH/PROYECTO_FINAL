-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Calificaciones"
(
    "idCalificaciones" bigint NOT NULL,
    "idLibro" bigint,
    "idUsuario" bigint,
    calificacion bigint,
    resenia text COLLATE pg_catalog."default",
    CONSTRAINT "Calificaciones_pkey" PRIMARY KEY ("idCalificaciones")
);

CREATE TABLE IF NOT EXISTS public."Libro"
(
    "idLibro" bigint NOT NULL,
    titulo text COLLATE pg_catalog."default",
    autor text COLLATE pg_catalog."default",
    genero text COLLATE pg_catalog."default",
    disponibilidad boolean,
    resumen text COLLATE pg_catalog."default",
    "fechaPublicacion" text COLLATE pg_catalog."default",
    CONSTRAINT "Libro_pkey" PRIMARY KEY ("idLibro")
);

CREATE TABLE IF NOT EXISTS public."Prestamos"
(
    "idPrestamos" bigint NOT NULL,
    "idLibro" bigint,
    "idUsuario" bigint,
    "fechaPrestamo" text COLLATE pg_catalog."default",
    "fechaDevolucion" text COLLATE pg_catalog."default",
    CONSTRAINT "Prestamos_pkey" PRIMARY KEY ("idPrestamos")
);

CREATE TABLE IF NOT EXISTS public."Reservas"
(
    "idReserva" bigint NOT NULL,
    "idLibro" bigint,
    "idUsuario" bigint,
    "fechaReserva" text COLLATE pg_catalog."default",
    estado boolean,
    CONSTRAINT "Reservas_pkey" PRIMARY KEY ("idReserva")
);

CREATE TABLE IF NOT EXISTS public."Usuario"
(
    "idUsuario" bigint NOT NULL,
    nombre text COLLATE pg_catalog."default",
    apellido text COLLATE pg_catalog."default",
    ci bigint,
    email text COLLATE pg_catalog."default",
    contracenia text COLLATE pg_catalog."default",
    rol text COLLATE pg_catalog."default",
    CONSTRAINT "Usuario_pkey" PRIMARY KEY ("idUsuario")
);

ALTER TABLE IF EXISTS public."Calificaciones"
    ADD CONSTRAINT "idLibro" FOREIGN KEY ("idLibro")
    REFERENCES public."Libro" ("idLibro") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Calificaciones"
    ADD CONSTRAINT "idUsuario" FOREIGN KEY ("idUsuario")
    REFERENCES public."Usuario" ("idUsuario") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Prestamos"
    ADD CONSTRAINT "idLibro" FOREIGN KEY ("idLibro")
    REFERENCES public."Libro" ("idLibro") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Prestamos"
    ADD CONSTRAINT "idUsuario" FOREIGN KEY ("idUsuario")
    REFERENCES public."Usuario" ("idUsuario") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Reservas"
    ADD CONSTRAINT "idLibro" FOREIGN KEY ("idLibro")
    REFERENCES public."Libro" ("idLibro") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Reservas"
    ADD CONSTRAINT "idUsuario" FOREIGN KEY ("idUsuario")
    REFERENCES public."Usuario" ("idUsuario") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;